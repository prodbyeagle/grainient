<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>grainient</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        scroll-behavior: smooth; /* This should ensure smooth scrolling */
      }
      /* Custom Styles */
      a {
        text-decoration: none;
      }
      .color-picker {
        position: relative;
        border: 2px solid #ffffff;
        border-radius: 0.375rem;
        padding: 0.25rem;
        background-color: #2d2d2d;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .color-picker input[type="color"] {
        border: none;
        padding: 0;
        width: 2rem;
        height: 2rem;
        border-radius: 0.375rem;
        cursor: pointer;
        outline: none;
        background-color: transparent;
      }
      .color-picker .remove-btn {
        position: absolute;
        top: 0;
        right: 0;
        width: 1.25rem;
        height: 1.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
        color: #ff5353;
        cursor: pointer;
        background-color: #2d2d2d;
        border-radius: 0.375rem;
      }
      .color-picker .remove-btn:hover {
        background-color: #ff5353;
        color: #ffffff;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-white">
    <!-- Navigation -->
    <header class="bg-gray-800 py-4">
      <nav class="container mx-auto flex items-center justify-between">
        <a href="#" class="text-2xl font-bold text-white">grainient</a>
        <ul class="flex space-x-4">
          <li><a href="#features" class="hover:text-gray-400">Features</a></li>
          <li><a href="#about" class="hover:text-gray-400">About</a></li>
          <li><a href="#contact" class="hover:text-gray-400">Contact</a></li>
        </ul>
      </nav>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-teal-500 to-blue-500 py-20">
      <div class="container mx-auto text-center">
        <h1 class="text-4xl font-bold mb-4">
          Transform Your Canvas with Stunning Gradients
        </h1>
        <p class="text-xl mb-6">
          Explore the power of gradients with our easy-to-use
          library.
        </p>
        <a
          href="#try-it"
          class="bg-yellow-500 hover:bg-yellow-600 text-white py-2 px-6 rounded-lg text-lg"
          >Try It Now</a
        >
      </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-20 bg-gray-800">
      <div class="container mx-auto text-center">
        <h2 class="text-3xl font-bold mb-8">Features</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
          <!-- Feature 1 -->
          <div class="bg-gray-900 p-4 rounded-lg shadow-lg transform transition-transform hover:-translate-y-2 hover:shadow-xl">
            <img
              src="./images/GradientsDemo.png"
              alt="Feature 1"
              class="w-full h-40 object-cover mb-4 rounded-lg"
            />
            <h3 class="text-2xl font-semibold mb-2">Customizable Gradients</h3>
            <p>
              Apply gradients with various types and angles to enhance your designs.
            </p>
          </div>
          <!-- Feature 2 -->
          <div class="bg-gray-900 p-4 rounded-lg shadow-lg duration-75 transform transition-transform hover:-translate-y-2 hover:shadow-xl">
            <img
              src="./images/GrainDemo.png"
              alt="Feature 2"
              class="w-full h-40 object-cover mb-4 rounded-lg"
            />
            <h3 class="text-2xl font-semibold mb-2">Clean Grain Effect</h3>
            <p>
              Add realistic and clean grain textures to your canvas with adjustable intensity.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20">
      <div class="container mx-auto text-center">
        <h2 class="text-3xl font-bold mb-8">About Us</h2>
        <p class="text-xl mb-6">
          Our library provides a simple and powerful way to create stunning
          gradients and grain effects for your web projects. Whether you're
          looking to enhance your designs with custom gradients or add dynamic
          grain textures, we've got you covered.
        </p>
      </div>
    </section>

    <!-- Try It Section -->
    <section id="try-it" class="bg-gray-800 py-20">
      <div class="container mx-auto text-center px-4">
        <h2 class="text-3xl font-bold mb-8">Try It Yourself</h2>
        <p class="text-xl mb-6">
          Experiment with our library and see how it can transform your canvas.
          Use the interactive controls to customize gradients and grain effects.
        </p>
        <div
          class="bg-gray-900 p-6 rounded-lg shadow-lg mx-auto w-full max-w-4xl"
        >
          <!-- Canvas Container -->
          <div class="w-full flex justify-center items-center mb-6">
            <canvas
              id="testCanvas"
              width="800"
              height="800"
              class="border border-gray-600 rounded-lg"
            ></canvas>
          </div>
          <!-- Settings Container -->
          <div class="flex flex-col space-y-4">
            <div
              class="flex flex-col md:flex-row md:space-x-4 space-y-4 md:space-y-0"
            >
              <label class="flex flex-col flex-1">
                <span class="text-gray-300">Gradient Type:</span>
                <select
                  id="gradientType"
                  class="mt-2 p-2 bg-gray-700 rounded-lg"
                >
                  <option value="linear" selected>Linear</option>
                  <option value="radial">Radial</option>
                </select>
              </label>
              <label class="flex flex-col flex-1">
                <span class="text-gray-300">Gradient Angle:</span>
                <input
                  type="number"
                  id="gradientAngle"
                  min="0"
                  max="360"
                  value="45"
                  class="mt-2 p-2 bg-gray-700 rounded-lg"
                />
              </label>
            </div>
            <label class="flex flex-col">
              <span class="text-gray-300">Grain Intensity:</span>
              <input
                type="range"
                id="grainIntensity"
                min="0"
                max="50"
                value="50"
                class="mt-2 p-2 bg-gray-700 rounded-lg"
              />
            </label>
            <div
              id="colorContainer"
              class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-4"
            >
              <!-- Color inputs will be added here dynamically -->
            </div>
            <div class="flex flex-wrap gap-4 justify-center">
              <button
                id="addColorButton"
                class="bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg transition duration-300"
              >
                Add Color
              </button>
              <button
                id="applyButton"
                class="bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition duration-300"
              >
                Apply
              </button>
              <button
                id="randomizeButton"
                class="bg-purple-500 hover:bg-purple-600 text-white p-2 rounded-lg transition duration-300"
              >
                Randomize Settings
              </button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-900 py-6">
      <div class="container mx-auto text-center text-gray-400">
        <p>&copy; 2024 ProdByEagle. All rights reserved.</p>
      </div>
    </footer>

    <script type="module">
      import { Gradient, applyGrain } from "../dist/esm/index.js";

      const canvas = document.getElementById("testCanvas");
      const ctx = canvas.getContext("2d");
      const colorContainer = document.getElementById("colorContainer");

      if (!(canvas instanceof HTMLCanvasElement)) {
        throw new Error(
          "Canvas element not found or not an instance of HTMLCanvasElement"
        );
      }

      if (!ctx) {
        throw new Error("Could not get canvas context");
      }

      // Function to generate a random pastel color
      function getRandomPastelColor() {
        const r = Math.floor(Math.random() * 128) + 127;
        const g = Math.floor(Math.random() * 128) + 127;
        const b = Math.floor(Math.random() * 128) + 127;
        return `#${r.toString(16).padStart(2, "0")}${g
          .toString(16)
          .padStart(2, "0")}${b.toString(16).padStart(2, "0")}`;
      }

      function createColorInput(color = getRandomPastelColor()) {
        const container = document.createElement("div");
        container.className = "color-picker flex items-center space-x-2";

        const input = document.createElement("input");
        input.type = "color";
        input.value = color;

        const removeButton = document.createElement("button");
        removeButton.textContent = "Remove";
        removeButton.className =
          "bg-red-500 hover:bg-red-600 text-white p-1 rounded-lg transition duration-300";
        removeButton.onclick = () => {
          container.remove();
        };

        container.appendChild(input);
        container.appendChild(removeButton);

        return container;
      }

      function applySettings() {
        const grainIntensity = parseInt(
          document.getElementById("grainIntensity").value
        );
        const gradientType = document.getElementById("gradientType").value;
        const gradientAngle = parseInt(
          document.getElementById("gradientAngle").value
        );

        const colors = Array.from(
          colorContainer.querySelectorAll('input[type="color"]')
        ).map((input) => input.value);

        const gradientOptions = {
          colors: colors,
          grain: grainIntensity,
          type: gradientType,
          angle: gradientAngle,
        };

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        Gradient(canvas, gradientOptions);
        applyGrain(ctx, canvas.width, canvas.height, grainIntensity);

        console.log("Gradient and grain effect applied to canvas.");
      }

      function randomizeSettings() {
        const grainIntensity = Math.floor(Math.random() * 26);
        document.getElementById("grainIntensity").value = grainIntensity;

        const gradientType = Math.random() > 0.5 ? "linear" : "radial";
        document.getElementById("gradientType").value = gradientType;

        const gradientAngle = Math.floor(Math.random() * 91);
        document.getElementById("gradientAngle").value = gradientAngle;

        const numColors = Math.floor(Math.random() * 3) + 2;
        colorContainer.innerHTML = "";
        for (let i = 0; i < numColors; i++) {
          colorContainer.appendChild(createColorInput());
        }

        applySettings();
      }

      function initializeTryItSection() {
        randomizeSettings(); // Apply random settings on load
      }

      document
        .getElementById("applyButton")
        .addEventListener("click", applySettings);
      document
        .getElementById("randomizeButton")
        .addEventListener("click", randomizeSettings);
      document
        .getElementById("addColorButton")
        .addEventListener("click", () => {
          colorContainer.appendChild(createColorInput());
        });

      initializeTryItSection(); // Initialize the Try It section with random settings
    </script>
  </body>
</html>